import { Response } from "node-fetch";

interface IResponse extends Response {
	statusCode: number;
}

const getResponseBody = async (response: IResponse): Promise<any> => {
	if (response.statusCode !== 204) {
		const contentType = response.headers.get("content-type");
		if (contentType) {
			const jsonTypes = ['application/json', 'application/problem+json']
			const isJSON = jsonTypes.some(type => contentType.toLowerCase().startsWith(type));
			if (isJSON && isString(response.body)) {
				return JSON.parse(response.body);
			} else {
				return response.body;
			}
		}
	}
    return undefined;
};
