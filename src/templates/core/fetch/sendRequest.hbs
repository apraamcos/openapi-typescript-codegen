export const sendRequest = async (
	config: OpenAPIConfig,
	options: ApiRequestOptions,
	url: string,
	body: any,
	formData: FormData | undefined,
	headers: Headers,
	onCancel: OnCancel
): Promise<IResponse> => {
	const controller = new AbortController();

	const request = {
		username: process.env.NTLM_USERNAME,
		password: process.env.NTLM_PASSWORD,
		headers: JSON.parse(process.env.HEADERS ?? "{}"),
		url,
		...(options.body && {json: options.body})
	};

	onCancel(() => controller.abort());

	return await httpntlmMethod(options.method)(request);
};
